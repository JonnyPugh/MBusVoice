{% extends "base.html" %}
{% block title %}MBus Voice Setup{% endblock %}
{% block heading %}Welcome to MBus Voice Setup{% endblock %}
{% block content %}
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.js"></script>
	<script src={{url_for('static', filename='js/index.js')}} ></script>
	<p>This form will be used for setting your favorite home and destination stops. You will have the ability to provide an alias for these stops as well. Once your first home stop and destination stop is set, you will be able to ask Alexa “When is the next bus coming?”, and Alexa will be able to default the home and destination for you and respond appropriately. </p>
	<p>Please use the map to locate your favorite home and destination stops and copy the stop name into the stop name field for home or destination. You can then assign an alias for your stops if you so choose. Some examples of aliases for destination stops could be home, work, class names, etc. If you do not provide an alias, we will provide an basic alias for you. </p>
	<p>Please fill out the form below.</p>
	<iframe src="https://mbus.doublemap.com/map/" height="650" width="1000"></iframe>
	<div class="form-group" style="width:300px;">
	<form destination="{{ url_for('post_favorites.create_favorite') }}" id="newHome">
	 	<label class="control-label" for="focusedInput">Home Stop</label>
 		<input class="form-control" name="stopName" id="homeStopName" list="systemStops">
	 	<label class="control-label" for="focusedInput">Home Alias</label>
 		<input class="form-control" name="stopAlias" type="text">
 		<input type="hidden" name="alexaId" value={{alexaID}} class="disabled">
	</form>
	<input type="button" value="Submit" id="homeSubmit" class="btn btn-default">
	<form destination="{{ url_for('post_favorites.create_favorite') }}" id="newDestination">
	 	<label class="control-label" for="focusedInput">Destination Stop</label>
 		<input class="form-control" name="stopName" id="destinationStopName" list="systemStops">
	 	<label class="control-label" for="focusedInput">Destination Alias</label>
 		<input class="form-control" name="stopAlias" type="text">
  		<input type="hidden" name="alexaID" value={{alexaID}}>
 		<input type="checkbox" name="primary" value="primary" class="checkbox">Make primary destination?<br>
	</form>
	<input type="button" value="Submit" id="destinationSubmit" class="btn btn-default">
	<datalist id="systemStops">
		{% for stopname in stop_names %}
			<option value="{{stopname}}" class="systemLevelStop">{{stopname}}</option>
		{% endfor %}
	</datalist>
	</div>
	<div>
	<h2>Current User Stops</h2>
	<table class="table table-striped table-hover " id="userFavorites" destination="{{ url_for('get_favorites.get_favorite_list') }}">
		<thead>
			<tr>
				<th>Stop Alias</th>
				<th>Stop Name</th>
				<th>Stop Type</th>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
	<form destination="{{ url_for('edit_favorites.change_primary') }}" id=changePrimary>
	 	<label class="control-label" for="focusedInput">Current Primary Destination (Alias)</label>
 		<input class="form-control" id=primaryAlias type="text" list="userDestinations">
 		<input type="hidden" name="alexaID" value={{alexaID}}>
	</form>
	<input type="button" value="Submit" id="submitChangePrimary" class="btn btn-default">
	<form destination="{{ url_for('edit_favorites.delete_favorite') }}" id=deleteFavorite>
	 	<label class="control-label" for="focusedInput">Delete Destination (Alias)</label>
 		<input class="form-control" id=deleteFavorite type="text" list="userStops">
 		<input type="hidden" name="alexaID" value={{alexaID}}>
	</form>
	<input type="button" value="Submit" id="submitDeleteFavorite" class="btn btn-default">
	<datalist id="userDestinations">
	</datalist>
	<datalist id="userStops">
	</datalist>
	</div>
{% endblock %}
